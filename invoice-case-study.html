<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Management System - Case Study | Shelton Bumhe</title>
    <link rel="stylesheet" href="Style.css">
    <style>
        .case-study-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .case-study-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .case-study-header h1 {
            font-size: 2.5rem;
            color: #2d3748;
            margin-bottom: 10px;
        }
        .case-study-header .subtitle {
            color: #718096;
            font-size: 1.1rem;
        }
        .case-study-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        .case-study-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #667eea;
        }
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        .metric-label {
            color: #4a5568;
            font-size: 0.9rem;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 30px;
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        .tech-item {
            background: #e6f3ff;
            color: #0066cc;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .business-rule {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #48bb78;
        }
        .business-rule h4 {
            color: #2d3748;
            margin-bottom: 10px;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 0.9rem;
            margin: 20px 0;
            overflow-x: auto;
        }
        .architecture-diagram {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-family: monospace;
            font-size: 0.9rem;
        }
        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="case-study-container">
        <a href="index.html" class="back-link">← Back to Portfolio</a>
        
        <div class="case-study-header">
            <h1>Invoice Management System (IMS)</h1>
            <p class="subtitle">The Very Good Building & Development Company (VGB)</p>
        </div>

        <div class="case-study-section">
            <h2>Project Overview</h2>
            <p><strong>Role:</strong> Software Engineer (Java)<br>
            <strong>Timeline:</strong> 6 weeks (MVP)<br>
            <strong>Team:</strong> Solo project (course project)<br>
            <strong>Stack:</strong> Java • JDBC • MySQL • JUnit • CSV → DB migration • OOP<br>
            <strong>Focus:</strong> Pricing & tax rules engine, invoice generation, data integrity</p>
            
            <h3>Executive Summary</h3>
            <p>VGB managed invoices with spreadsheets and paper, leading to slow billing cycles and error-prone tax calculations. I built a robust <strong>Invoice Management System (IMS)</strong> that encodes business rules for equipment sales, leases, rentals, material sales, and subcontractor contracts. The system automates invoice creation, applies the correct tax logic per item type, and exports detailed and summary reports—<span class="highlight">always rounded to the nearest cent</span>.</p>
        </div>

        <div class="case-study-section">
            <h2>Problem Statement</h2>
            <ul>
                <li>Manual spreadsheets → miscalculations, inconsistent rounding, and slow reporting</li>
                <li>Complex pricing/tax rules across <strong>five item types</strong> (Equipment Purchase/Lease/Rental, Material, Contract)</li>
                <li>Need for <strong>auditable</strong>, <strong>deterministic</strong> outputs and reliable data storage</li>
            </ul>
        </div>

        <div class="case-study-section">
            <h2>Solution Architecture</h2>
            <ul>
                <li><strong>Object-Oriented Java</strong> domain model with dedicated classes per item type</li>
                <li><strong>Relational DB (MySQL)</strong> for persistent, queryable records</li>
                <li><strong>Rules engine inside item subclasses</strong>—each class owns its subtotal/tax/total logic</li>
                <li><strong>Exact-decimal math</strong> via <code>BigDecimal</code> with HALF_UP rounding to <strong>$0.01</strong></li>
                <li><strong>JUnit</strong> test suite for every rule + invoice totals</li>
            </ul>
        </div>

        <div class="case-study-section">
            <h2>Business Rules Implemented</h2>
            
            <div class="business-rule">
                <h4>Equipment — Purchase</h4>
                <p>Subtotal = <code>retail_price</code><br>
                Tax = <strong>5.25% use tax</strong> of subtotal<br>
                Total = <code>subtotal + tax</code></p>
            </div>

            <div class="business-rule">
                <h4>Equipment — Lease</h4>
                <p>Monthly base = <code>retail_price / 60</code> (5 years)<br>
                Monthly with markup = <code>1.5 × base</code><br>
                Subtotal = <code>months × monthly_with_markup</code><br>
                Lease-tax tier: <strong>small = untaxed</strong>, <strong>mid = $500 flat</strong>, <strong>large = $1,500 flat</strong> (thresholds configurable)</p>
            </div>

            <div class="business-rule">
                <h4>Equipment — Rental</h4>
                <p>Hourly rate = <strong>0.1% of retail</strong> = <code>0.001 × retail_price</code><br>
                Subtotal = <code>hours × hourly_rate</code><br>
                Tax = <strong>4.38% sales tax</strong> of subtotal</p>
            </div>

            <div class="business-rule">
                <h4>Material Sale</h4>
                <p>Subtotal = <code>unit_price × quantity</code> (<strong>quantity must be an integer > 0</strong>)<br>
                Tax = <strong>7.15% sales tax</strong> of subtotal</p>
            </div>

            <div class="business-rule">
                <h4>Contract (Subcontractor)</h4>
                <p>Subtotal = <code>contract_amount</code><br>
                Tax = <strong>exempt</strong></p>
            </div>

            <p><strong>Note:</strong> All money values rounded to <span class="highlight">nearest cent</span> after each line-item computation.</p>
        </div>

        <div class="case-study-section">
            <h2>System Architecture</h2>
            <div class="architecture-diagram">
                <div>UI[Invoice CLI / Report Export] --> SVC[Invoice Service]</div>
                <div>SVC -->|reads/writes| DB[(MySQL)]</div>
                <div>SVC --> RULES[Item Rules (OOP)]</div>
                <div>RULES --> EP[EquipmentPurchase]</div>
                <div>RULES --> EL[EquipmentLease]</div>
                <div>RULES --> ER[EquipmentRental]</div>
                <div>RULES --> MAT[Material]</div>
                <div>RULES --> CON[Contract]</div>
            </div>

            <h3>Data Model</h3>
            <div class="code-block">
COMPANY ||--o{ INVOICE : has
INVOICE ||--|{ INVOICE_ITEM : contains
ITEM ||--o{ INVOICE_ITEM : referenced

COMPANY {
  uuid company_id PK
  string name
}

INVOICE {
  uuid invoice_id PK
  uuid company_id FK
  date invoice_date
}

ITEM {
  uuid item_uuid PK
  string item_type
  decimal retail_price
  decimal unit_price
}

INVOICE_ITEM {
  uuid invoice_item_id PK
  uuid invoice_id FK
  uuid item_uuid FK
  int quantity
  int hours
  int months
  decimal contract_amount
}
            </div>
        </div>

        <div class="case-study-section">
            <h2>Implementation Highlights</h2>
            
            <h3>Encapsulation</h3>
            <p><code>LineItem</code> (abstract) → subclasses compute <code>subtotal()</code>, <code>tax()</code>, <code>total()</code></p>

            <h3>Precision</h3>
            <p><code>BigDecimal</code> with <code>setScale(2, RoundingMode.HALF_UP)</code>; no floating-point drift</p>

            <h3>Validation</h3>
            <p>Integer quantities for materials, non-negative hours/months, non-negative prices</p>

            <h3>Configuration</h3>
            <p>Tax rates & lease tiers externalized for future changes</p>

            <h3>Testing</h3>
            <p>JUnit tests cover each rule + edge cases (zero quantities, tier boundaries)</p>

            <h3>Example Implementation</h3>
            <div class="code-block">
BigDecimal toCents(BigDecimal x) { 
    return x.setScale(2, RoundingMode.HALF_UP); 
}

class EquipmentRental extends LineItem {
    BigDecimal rate(BigDecimal retail) { // 0.1% of retail per hour
        return retail.multiply(new BigDecimal("0.001"));
    }
    
    public BigDecimal subtotal() {
        return toCents(rate(retailPrice).multiply(new BigDecimal(hours)));
    }
    
    public BigDecimal tax() {
        return toCents(subtotal().multiply(new BigDecimal("0.0438")));
    }
}
            </div>
        </div>

        <div class="case-study-section">
            <h2>Results & Performance</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">5</div>
                    <div class="metric-label">Item Types</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">100%</div>
                    <div class="metric-label">Rule Coverage</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">&lt;1s</div>
                    <div class="metric-label">Report Generation</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">$0.01</div>
                    <div class="metric-label">Rounding Precision</div>
                </div>
            </div>
            
            <h3>Key Achievements</h3>
            <ul>
                <li><strong>Automated invoice creation</strong> with deterministic rounding and rule enforcement</li>
                <li><strong>Speed:</strong> CLI generates detailed + summary reports in seconds for multi-item invoices</li>
                <li><strong>Quality:</strong> Unit tests prevent regressions when tax rates or tiers change</li>
                <li><strong>Lesson:</strong> Keeping calculations inside each subclass made the code safer and easier to extend</li>
            </ul>
        </div>

        <div class="case-study-section">
            <h2>Technical Implementation</h2>
            <div class="tech-stack">
                <span class="tech-item">Java</span>
                <span class="tech-item">JDBC</span>
                <span class="tech-item">MySQL</span>
                <span class="tech-item">JUnit</span>
                <span class="tech-item">BigDecimal</span>
                <span class="tech-item">OOP</span>
                <span class="tech-item">CSV Migration</span>
            </div>
            
            <h3>Key Technical Decisions</h3>
            <ul>
                <li><strong>BigDecimal for Financial Calculations:</strong> Eliminates floating-point precision errors</li>
                <li><strong>Polymorphic Design:</strong> Each item type encapsulates its own business logic</li>
                <li><strong>Database Normalization:</strong> Proper relational design with foreign key constraints</li>
                <li><strong>Comprehensive Testing:</strong> Unit tests for every business rule and edge case</li>
                <li><strong>Configuration Management:</strong> Externalized tax rates and thresholds</li>
            </ul>
        </div>

        <div class="case-study-section">
            <h2>Challenges & Solutions</h2>
            
            <h3>Financial Precision</h3>
            <p><strong>Challenge:</strong> Ensuring exact cent-level accuracy in all calculations</p>
            <p><strong>Solution:</strong> Implemented BigDecimal with HALF_UP rounding and centralized rounding method</p>

            <h3>Complex Business Rules</h3>
            <p><strong>Challenge:</strong> Managing different tax rates and calculation methods per item type</p>
            <p><strong>Solution:</strong> Polymorphic design with abstract LineItem class and specialized subclasses</p>

            <h3>Data Integrity</h3>
            <p><strong>Challenge:</strong> Ensuring data consistency across invoice items and calculations</p>
            <p><strong>Solution:</strong> Database constraints, validation rules, and comprehensive unit testing</p>
        </div>

        <div class="case-study-section">
            <h2>Next Steps & Future Enhancements</h2>
            <ul>
                <li><strong>Web UI:</strong> Spring Boot + Thymeleaf/React with CSV upload → DB</li>
                <li><strong>Security:</strong> Role-based access + audit logs</li>
                <li><strong>Automation:</strong> Scheduled monthly reports and per-customer dashboards</li>
                <li><strong>Integration:</strong> API endpoints for external system integration</li>
                <li><strong>Analytics:</strong> Business intelligence and reporting dashboard</li>
            </ul>
        </div>

        <div class="case-study-section">
            <h2>Business Impact</h2>
            <p>This project demonstrates my ability to:</p>
            <ul>
                <li>Design and implement complex business rule engines</li>
                <li>Handle financial calculations with precision and accuracy</li>
                <li>Build maintainable, testable object-oriented systems</li>
                <li>Create robust database schemas with proper normalization</li>
                <li>Implement comprehensive testing strategies for business logic</li>
                <li>Translate complex business requirements into technical solutions</li>
            </ul>
        </div>
    </div>
</body>
</html>
